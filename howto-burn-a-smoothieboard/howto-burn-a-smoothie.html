<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>How to burn a Smoothieboard</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="How to reproduce the issue. Note that this write-up is quick and dirty. And my conclusion may be wrong. And also ignore my English syntax and the grammer :)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h1 class="title"><a name="idp1377573852"></a>How to burn a Smoothieboard</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Li</span> <span class="surname">Loong</span></h3><div class="affiliation"><div class="address"><p><br>
      <code class="email">&lt;<a class="email" href="mailto:atommann@gmail.com">atommann@gmail.com</a>&gt;</code><br>
    </p></div></div></div></div><div><p class="copyright">Copyright © 2016 OpenTrons Labworks Inc</p></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>How to reproduce the issue. Note that this write-up is quick and dirty. And my conclusion may be wrong. And also ignore my English syntax and the grammer :)</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#idp1378213148">Experiment on July 19 2016</a></span></dt><dt><span class="sect1"><a href="#idp1378215188">Holy Shit, It really smoked!</a></span></dt><dt><span class="sect1"><a href="#idp1377713220">There's a Short-circuit</a></span></dt><dt><span class="sect1"><a href="#idp1378206788">Why M4 and M5 never smoked</a></span></dt><dt><span class="sect1"><a href="#idp1378208252">Why Almost only OpenTrons faces this issue</a></span></dt><dt><span class="sect1"><a href="#idp1377547748">Conclusion</a></span></dt><dt><span class="sect1"><a href="#idp1377548572">How to Get Rid of This Issue</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1378213148"></a>Experiment on July 19 2016</h2></div></div></div><p>Chiu mentioned that if drive the axes by hand fast enough, then turn the power on, sometimes the stepper motor driver IC will smoke.</p><p>A motor is also a generator. When you drive the axis the motor will generate a voltage. But how high the voltage is?</p><p>So I connected X, Y and Z cables to the smoothieboard, and used a multimeter to probe the VBB pins of the IC (A4982), at the same time, another person (Jason to be precise) drove the axis by hand.</p><p>Generally when we do this, we can see the VBB LED lights up on the PCB. Jason said: "when I drive this axis I feel it's not smooth..."</p><p>I didn't keep it in mind.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1378215188"></a>Holy Shit, It really smoked!</h2></div></div></div><p>This morning (July 20 2016). I removed the smoothieboard off from the machine which was tested yesterday afternoon. And put it on my desk. Connect the USB cable. It was strange: The 3.3V LED on the boards is not on.</p><p>I did not thinked then (my brain was short-circuited). Then connected the 12VDC, turn the power switch on. It just smoked! I did it! Finally.</p><p>It is the IC for M2.</p><p>Then I connected the motor to M1 and turn the power on, I saw fire on the IC for M2!</p><p>Then I observed the dead IC under an optical microscope. And it is very clear that the VBB1 and VBB2 pins (both are connected with 12V) are burned out (metal pad melted inside the IC), this indicates high current at very very short time! A short circuit can do this.</p><p>Removed the IC for M2 and removed the motor.</p><p>Connect USB cable again, the 3.3V LED on the board is dim. Check the voltage of 3.3V, the reading is only ~1.8V. The LM1117-3.3 is super hot. The MCU is super hot.</p><div class="figure"><a name="idp1377711876"></a><p class="title"><b>Figure 1. VBB fused</b></p><div class="figure-contents"><div class="mediaobject"><img src="figures/burnt.jpg" alt="VBB fused"></div></div></div><br class="figure-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1377713220"></a>There's a Short-circuit</h2></div></div></div><p>Then I measured 3.3V and GND with a multimeter on the PCB and found that they are shorted! But where? Need to find it out.</p><p>So I start to remove ICs one by one. After I removed one IC, I used the multimeter to check 3.3V and GND to see if the PCB still has short-circuit.</p><p>After removed all stepper motor driver ICs, the short-circuit still exist.</p><p>Then removed the MCU (LPC1769FBD100,551), short-circuit disappeared suddenly!</p><p>Double check Vdd (eg. pin 96) and Vss (eg. pin 97) pin of the MCU, yes, they are shorted internally. It means this MCU is already dead.</p><div class="figure"><a name="idp1377715116"></a><p class="title"><b>Figure 2. Seeking the short-circuit</b></p><div class="figure-contents"><div class="mediaobject"><img src="figures/short-circuit.jpg" alt="short circuit"></div></div></div><br class="figure-break"><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1377716484"></a>Reproduce it Again</h2></div></div></div><p>Which caused the short-circuit? I am curious. Yesterday we did nothing special but just drove the axes by hand.</p><p>I talked this problem with Kenny Tay, he is also an EE. We changed some ideas. And I said: "See if I can reproduce it again."</p><p>Then I connect the only blue smoothieboard with the machine, drive the axis by hand. The VBB LED lights up. Drive it for a little bit longer. Suddenly the VBB LED is off.</p><p>Stop the driving.</p><p>Check 3.3V and GND. I get short-circuit!</p><p>Check VBB(12V) and GND. The multimeter beeps, the resistance is only about 13 Ohm! Which can be considered as a short-circuit!</p><p>And at this moment, with the motor cable connected (for example X axis), if you still drive the axis, you will feel that you need to use more force to drive the axis. This is because 12V and GND has been tied together by the short circuit. So the coil of the motor has been shorted. When a motor's coil is shorted, it is in the "brake" mode. This is what Jason's feeling yesterday (why it's not smooth).</p><p>And if I connect the 12V power supply, I think the ICs will smoke right away. But it's possible to fix the boards or I leave the sparkfun for tomorrow.</p><p>Update: Just have a short talk with Kenny again. He said: "Let's try to see if it smokes."</p><p>OK, let's do it. So we get this video.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>The original video is in folder <code class="filename">figure/video.mov</code></div><div class="figure"><a name="idp1378203588"></a><p class="title"><b>Figure 3. crazy smoke with fire</b></p><div class="figure-contents"><div class="mediaobject"><img src="figures/video.gif" alt="smoke with fire"></div></div></div><br class="figure-break"><p>But how exactly the electrons loos in the stepper motor driver IC? And what happened?</p><div class="figure"><a name="idp1378205268"></a><p class="title"><b>Figure 4. why not smooth</b></p><div class="figure-contents"><div class="mediaobject"><img src="figures/coil-short.png" alt="coil shorted"></div></div></div><br class="figure-break"></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1378206788"></a>Why M4 and M5 never smoked</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Generally the travel distance of A and B motors are short.</p></li><li class="listitem"><p>Generally it's not easy to drive A and B by hand.</p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1378208252"></a>Why Almost only OpenTrons faces this issue</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Our mechanism is kinda special. Like used belt.</p></li><li class="listitem"><p>The machine itself is relatively big.</p></li><li class="listitem"><p><span class="personname">Will</span> also mentioned that sometime after the customer relocated the machine, it smoked. The reason is that the shaking killed the circuit board.</p></li><li class="listitem"><p><span class="personname">Chiu</span> mentioned that after some customer just got the machine, powered it on, it smoked. The reason is that the circuit has been killed during the shipment by shaking.</p></li><li class="listitem"><p>Other machines which uses smoothieboard may use lead-screw to drive the load which is not easy to shake and move.</p></li></ul></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1377547748"></a>Conclusion</h2></div></div></div><p>The movement of the axes(motors) generate relative high voltage wich killed the circuit, caused the short-circuits. When turn the power on, high current fried the IC. Released the "magic smoke". So the PCB ceases to work.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1377548572"></a>How to Get Rid of This Issue</h2></div></div></div><p>Now I don't know.</p><p>It is possible to use an oscilloscope or other instruments to capture the Electromotive Force induced by the stepper motors.</p></div></div></body></html>
